@{
    ViewBag.Title = "Create Event Request";
    Layout = "~/Views/Shared/_OrganizerLayout.cshtml";
}

<div class="flex flex-col gap-6">
    <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-[#181111] dark:text-white">Create Event Request</h2>
        <a href="@Url.Action("Dashboard", "Organizer")"
           class="inline-flex items-center rounded-lg border border-gray-300 px-3 py-1.5 text-sm font-medium text-[#181111] hover:bg-gray-50 dark:border-gray-600 dark:text-gray-100 dark:hover:bg-[#333]">
            Back to Dashboard
        </a>
    </div>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success" style="background-color: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
            @TempData["Success"]
        </div>
    }

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger" style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
            @ViewBag.Error
        </div>
    }

    @using (Html.BeginForm("CreateEvent", "Organizer", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="admin-body">
            <!-- Event basics -->
            <div class="form-group">
                <label>Title*</label>
                <input type="text" name="Title" required />
            </div>

            <div class="form-group">
                <label>Category*</label>
                <select name="categoryId" required>
                    @foreach (var c in (IEnumerable<EventDeneme.Models.categories>)ViewBag.Categories)
                    {
                        <option value="@c.id">@c.display_name</option>
                    }
                </select>
            </div>

            <div class="form-group">
                <label>Description</label>
                <textarea name="Description" rows="4"></textarea>
            </div>

            <div class="form-group">
                <label>Language</label>
                <input type="text" name="Language" />
            </div>

            <div class="form-group">
                <label>Age Limit</label>
                <input type="text" name="AgeLimit" />
            </div>

            <div class="form-group">
                <label>Poster URL</label>
                <input type="text" name="PosterUrl" />
            </div>

            <!-- Performance details -->
            <h3 class="mt-6 mb-2 text-base font-semibold text-[#181111]">Performance</h3>

            <div class="form-group">
                <label>Venue*</label>
                @{
                    var venues = ViewBag.Venues as IEnumerable<EventDeneme.Models.venues>;
                }
                @if (venues == null || !venues.Any())
                {
                    <p style="color:#b91c1c; font-size:0.9rem;">
                        No venues are configured yet. Please contact the admin to add a venue before creating an event.
                    </p>
                }
                else
                {
                    <select name="venueId" required>
                        @foreach (var v in venues)
                        {
                            <option value="@v.id">@v.name</option>
                        }
                    </select>
                }
            </div>

            <div class="form-group">
                <label>Performance Start*</label>
                <input type="datetime-local" name="performanceStart" required />
            </div>

            <!-- Price tier details -->
            <h3 class="mt-6 mb-2 text-base font-semibold text-[#181111]">Pricing</h3>

            <div class="form-group">
                <label>Tier Name</label>
                <input type="text" name="tierName" placeholder="Standard" />
            </div>

            <div class="form-group">
                <label>Seat Section</label>
                <input type="text" name="seatSection" placeholder="General" />
            </div>

            <div class="form-group">
                <label>Capacity</label>
                <input type="number" name="capacity" min="1" />
            </div>

            <div class="form-group">
                <label>Price*</label>
                <input type="number" name="price" min="0" step="0.01" required />
            </div>

            <div class="form-group">
                <label>Currency</label>
                <input type="text" name="currency" placeholder="TRY" />
            </div>

            <button type="submit" class="btn btn-primary" style="margin-top:10px;">Submit for Approval</button>
        </div>
    }
</div>


