@model EventDeneme.Models.TicketDetailsViewModel
@{
    ViewBag.Title = "Ticket Details";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var dateText = Model.StartDate.HasValue
        ? Model.StartDate.Value.ToString("dd MMMM yyyy HH:mm")
        : "TBA";
    var purchasedText = Model.PurchasedAt.HasValue
        ? Model.PurchasedAt.Value.ToString("dd MMM yyyy HH:mm")
        : "N/A";
    var priceText = Model.Price.HasValue
        ? Model.Price.Value.ToString("C2")
        : "-";
}

<div class="ticket-details-page">
    <div class="ticket-details-card">
        <div class="ticket-main">
            <div class="ticket-header">
                <div class="ticket-event-meta">
                    <h1>@Model.EventTitle</h1>
                    <p class="ticket-date">@dateText</p>
                    <p class="ticket-venue">@Model.VenueName, @Model.CityName</p>
                </div>
            </div>

            <div class="ticket-body">
                <div class="ticket-left">
                    <div class="ticket-row">
                        <span class="label">Seat</span>
                        <span class="value">@Model.SeatRow@Model.SeatNumber</span>
                    </div>
                    <div class="ticket-row">
                        <span class="label">Price</span>
                        <span class="value">@priceText</span>
                    </div>
                    <div class="ticket-row">
                        <span class="label">Purchased At</span>
                        <span class="value">@purchasedText</span>
                    </div>
                    <div class="ticket-row">
                        <span class="label">Ticket Code</span>
                        <span class="value code">@Model.TicketCode</span>
                    </div>
                </div>

                <div class="ticket-right">
                    <img src="@Model.QR" alt="QR Code" class="qr" />
                    <span class="scan-text">Show this code at the entrance</span>
                </div>
            </div>
        </div>

        <div class="ticket-actions">
            @using (Html.BeginForm("RequestRefund", "Ticket", FormMethod.Post, new { onsubmit = "return confirm('Do you really want to request a refund for this ticket?');" }))
            {
                @Html.AntiForgeryToken()
                @Html.Hidden("ticketId", Model.TicketId)
                <button type="submit" class="btn-refund">
                    Request Refund
                </button>
            }
            <a href="@Url.Action("MyTickets", "Profile")" class="btn-secondary-link">
                Back to My Tickets
            </a>
        </div>
    </div>
</div>

<style>
    .ticket-details-page {
        padding: 40px 20px;
        display: flex;
        justify-content: center;
    }

    .ticket-details-card {
        width: 100%;
        max-width: 960px;
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        padding: 24px 28px 20px 28px;
    }

    .ticket-main {
        border-radius: 12px;
        background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
        padding: 20px 22px;
    }

    .ticket-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
    }

    .ticket-event-meta h1 {
        margin: 0 0 4px 0;
        font-size: 22px;
        font-weight: 700;
        color: #d22;
    }

    .ticket-event-meta .ticket-date {
        margin: 0;
        font-weight: 600;
        color: #333;
    }

    .ticket-event-meta .ticket-venue {
        margin: 2px 0 0 0;
        color: #666;
        font-size: 14px;
    }

    .ticket-body {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 16px;
        border-top: 1px dashed #ccc;
        padding-top: 16px;
    }

    .ticket-left {
        flex: 1 1 260px;
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .ticket-row {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
    }

    .ticket-row .label {
        color: #888;
    }

    .ticket-row .value {
        font-weight: 600;
        color: #222;
    }

    .ticket-row .value.code {
        font-family: monospace;
        background: #f3f3f3;
        padding: 2px 8px;
        border-radius: 4px;
        border: 1px solid #ddd;
    }

    .ticket-right {
        flex: 0 0 180px;
        text-align: center;
    }

    .ticket-right .qr {
        width: 140px;
        height: 140px;
        border-radius: 8px;
        background: #fff;
        padding: 4px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .ticket-right .scan-text {
        display: block;
        margin-top: 8px;
        font-size: 12px;
        color: #777;
    }

    .ticket-actions {
        margin-top: 18px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .btn-refund {
        background: #d22;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 8px 16px;
        font-weight: 600;
        cursor: pointer;
    }

    .btn-refund:hover {
        background: #b51313;
    }

    .btn-secondary-link {
        color: #555;
        text-decoration: underline;
        font-size: 14px;
    }

    @@media (max-width: 768px) {
        .ticket-details-card {
            padding: 18px 16px;
        }

        .ticket-main {
            padding: 16px;
        }
    }
</style>




